@* <auto-generated> - Template:AdminListPage, Version:2022.06.09, Id:414c3369-6f09-4341-b755-a133eab5e775 *@
@using ArtistSiteAAD.Shared.DTO
@page "/admin/artists"
@inherits ASArtistsListViewModel
<div class="mud-palette-override"> @* This outer div is necessary for CSS Isolation to function *@


    @if (!IsReady)
    {
        <MudText>
            Loading....
        </MudText>
    }

	@if (!Saved)
	{
			<MudTable Items="@Artists" Dense="@Dense" Hover="@Hover" Bordered="@Bordered" Striped="@Striped"
				RowsPerPage="7"
				Filter="new Func<Artist, bool>(FilterArtist1)" @bind-SelectedItem="SelectedArtist">
				<ToolBarContent>
					<MudText Typo="Typo.h6">Artists</MudText>
					<MudSpacer />
					<MudTextField @bind-Value="SearchString1" Placeholder="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0" />
				</ToolBarContent>
				<HeaderContent>
					<MudTh>ID</MudTh>
					<MudTh>Artist</MudTh>
					<MudTh>&nbsp;</MudTh>
				</HeaderContent>
				<RowTemplate>
					@{
							var editHref = $"/admin/artistedit/{context.ArtistId}";
					}
					<MudTd DataLabel="Id">@context.ArtistId</MudTd>
					<MudTd DataLabel="Artist">@context.Name</MudTd>
					<MudTd DataLabel="Actions">
						<MudIconButton Link="@editHref" Icon="@Icons.Filled.Build" Variant="Variant.Filled" Color="Color.Primary" />
						<MudIconButton OnClick="@(()=>ConfirmDeleteAsync(context))" Icon="@Icons.Filled.DeleteForever" Variant="Variant.Filled" Color="Color.Error" />
					</MudTd>
				</RowTemplate>
				<PagerContent>
					<MudTablePager />
				</PagerContent>
			</MudTable>
	}

	else
    {
        <div>
            <a class="btn btn-secondary m-2" @onclick="@ReturnToList">
                Return to list
            </a>
        </div>
    }
    @if (!string.IsNullOrWhiteSpace(Message))
    {
        <div class="alert @StatusClass">
            @Message
                <MudButton @onclick="@ClearMessage" Variant="Variant.Filled" Color="Color.Error" Style="height: 12px; width: 12px; min-width: 12px; padding: 1px; top: -6px;">
                    <i class="fas fa-times"></i>
                </MudButton>
        </div>
    }
</div>
